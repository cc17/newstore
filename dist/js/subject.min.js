define("src/js/subject/subject",["src/js/libs/jquery","src/js/libs/subbyte","src/js/libs/template","src/js/libs/Dialog","src/js/libs/AppDialogTpl","src/js/libs/FixAppstatus","src/js/libs/Observer","src/js/libs/reportValue","src/js/libs/needUpdate","src/js/libs/mainNavItem","src/js/libs/Slider","src/js/libs/returnToTop","src/js/libs/throttle","src/js/libs/debounce","src/js/libs/searchForm","src/js/libs/xss","src/js/libs/queryString","src/js/libs/urls_config"],function(a){function b(a){new l(a)}var c=a("src/js/libs/jquery"),d=(a("src/js/libs/subbyte"),a("src/js/libs/template")),e=a("src/js/libs/Dialog"),f=a("src/js/libs/AppDialogTpl"),g=a("src/js/libs/FixAppstatus"),h=(a("src/js/libs/Slider"),a("src/js/libs/Observer")),i=a("src/js/libs/returnToTop");i.config.container_width=980,i.init();var j=(a("src/js/libs/searchForm"),a("src/js/libs/urls_config")),k=j.offlineStatus?j.offline.subject+"?t="+(new Date).getTime():j.online.subject+"&t="+(new Date).getTime(),l=function(a){this.cache={},this.url=a.url,this.tpl=a.tpl,this.$wrap=a.wrap,this.getData()};return l.prototype={constructor:l,getData:function(){var a=location.search.slice(4),b=this;/\d/.test(a)&&c.ajax({url:k+"&subject="+a}).done(c.proxy(b.fixData,b))},fixData:function(a){var b=this;if(a.res){for(var c=a.info,d=c.header,e=c.body,f=0,h=e.length;h>f;f++){var i=e[f],j=i.list;j&&j.length&&(j=g.fixAppData(j),b.cacheData(j))}this.renderAll(d,e)}},renderOne:function(a,b,c){return d(this.tpl,{data:b,name:a,odd:c})},renderAll:function(a,b){this.renderHeader(a);for(var c=[],d=0,e=b.length;e>d;d++){var f=b[d];f.list&&f.list.length&&c.push(this.renderOne(f.name,f.list,d%2))}this.$wrap.html(c.join("")),this.bindEvt()},renderHeader:function(a){c(".top-banner").css({background:a.color+" url("+a.headimg+") no-repeat center center"})},cacheData:function(a){var b=this;c.each(a,function(a,c){b.cache[c.app_uuid]=c})},_getCache:function(){return this.cache},bindEvt:function(){var a=this;this.pagerHandle(),this.$wrap.on("click","a.J-show-dialog",function(b){var d,g=c(this),h=g.attr("data-uuid");if(h&&(d=a.cache[h])){var i=f.render({data:d}),j=new e("x",{zIndex:20,title:"",w:952,h:580,noFixPos:!0,content:i,fixClass:"add-dialog",contentClass:"add-dialog-outer"});return j.show(),b.stopPropagation(),!1}}),h.register("updateData",this.updateData,this)},updateData:function(a,b){this.cache[a]&&(this.cache[a].installed=b?!1:!0)},pagerHandle:function(){var a=c(".zt-list-wrap");c.each(a,function(a,b){function d(){2==h?(g.i==h-1&&(j.addClass("disabled"),k.removeClass("disabled")),0==g.i&&(k.addClass("disabled"),j.removeClass("disabled"))):(g.i>0&&g.i<h-1&&i.find(".disabled").removeClass("disabled"),g.i==h-1&&j.addClass("disabled"),0==g.i&&k.addClass("disabled"))}var e=c(b),f=(e.unslider({autoplay:!1,loop:!1,complete:d,items:".zt-list-bd",item:".list-row"}),e.data("key")),g=e.data(f),h=g.li.length,i=e.prev().find(".list-pager");if(e.find(".list-row").length>1?i.show():"",i.length){i.on("click","span",function(){var a=c(this).attr("data-action");g[a]()});var j=i.find(".next"),k=i.find(".prev")}})}},{init:b}});