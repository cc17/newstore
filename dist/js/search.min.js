define("src/js/search/search",["src/js/libs/jquery","src/js/libs/subbyte","src/js/libs/template","src/js/libs/Dialog","src/js/libs/AppDialogTpl","src/js/libs/FixAppstatus","src/js/libs/Observer","src/js/libs/reportValue","src/js/libs/needUpdate","src/js/libs/mainNavItem","src/js/libs/Slider","src/js/libs/returnToTop","src/js/libs/throttle","src/js/libs/debounce","src/js/libs/searchForm","src/js/libs/xss","src/js/libs/queryString","src/js/libs/urls_config"],function(a){function b(a){new n(a)}var c=a("src/js/libs/jquery"),d=(a("src/js/libs/subbyte"),a("src/js/libs/template")),e=a("src/js/libs/Dialog"),f=a("src/js/libs/AppDialogTpl"),g=a("src/js/libs/FixAppstatus"),h=(a("src/js/libs/Slider"),a("src/js/libs/Observer"));a("src/js/libs/returnToTop").init();var i=(a("src/js/libs/searchForm"),a("src/js/libs/queryString")),j=a("src/js/libs/xss"),k=a("src/js/libs/urls_config"),l=k.offlineStatus?"offline":"online",m=i.parse(location.search.slice(1)),n=(m.keyword,function(a){this.cache={},this.url=k[l].search,this.tpl=a.tpl,this.$wrap=a.wrap,this.getData(),this.initFill()});return n.prototype={constructor:n,initFill:function(){var a,b=i.parse(location.search.slice(1));(a=b.keyword)&&c(".result-hd").html('"'+j(decodeURIComponent(a))+'"的搜索结果')},getData:function(){var a=this,b=location.search;if(b){var d=b.substring(1).split("="),e={};e[d[0]]=d[1],c.ajax({url:k[l].search+encodeURIComponent(d[1])+"&t="+(new Date).getTime(),beforeSend:function(){a.$wrap.html('<div class="loading"></div>')}}).done(c.proxy(a.fixData,a))}},fixData:function(a){if(a="string"==typeof a?JSON.parse(a):a,!a.res)return this.$wrap.html(this.emptyTips()),void 0;this.$wrap.html(this.emptyTips());var b=a.info;b=g.fixAppData(b),this.cacheData(b),this.renderUi(b)},emptyTips:function(){return'<div class="no-result">未找到相符的搜索结果</div>'},renderUi:function(a){var b=d(this.tpl,{data:a});this.$wrap.html(b),this.bindEvt()},cacheData:function(a){var b=this;c.each(a,function(a,c){b.cache[c.app_uuid]=c})},_getCache:function(){return this.cache},bindEvt:function(){var a=this;this.$wrap.on("click","a.J-show-dialog",function(b){var d,g=c(this),h=g.attr("data-uuid");if(h&&(d=a.cache[h])){var i=f.render({data:d}),j=new e("x",{zIndex:20,title:"",w:952,h:580,noFixPos:!0,content:i,fixClass:"add-dialog",contentClass:"add-dialog-outer"});return j.show(),b.stopPropagation(),!1}}),h.register("updateData",this.updateData,this)},updateData:function(a,b){this.cache[a]&&(this.cache[a].installed=b?!1:!0)}},{init:b}});